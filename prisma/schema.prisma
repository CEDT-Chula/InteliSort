// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-py"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [pgvector(map: "vector", schema: "extensions")]
}

// ticket_id	type	organization	comment	coords	photo	photo_after	address	subdistrict	district	province	timestamp	state	star	count_reopen	last_activity
enum State {
  pending    @map("รอรับเรื่อง")
  inprogress @map("กำลังดำเนินการ")
  done       @map("เสร็จสิ้น")
}

model Issue {
  id            String                 @id @default(uuid())
  ticket_id     String
  type          String
  organization  String
  comment       String
  coords        String
  photo         String
  photo_after   String
  address       String
  subdistrict   String
  district      String
  province      String
  timestamp     DateTime
  state         State                  @default(pending)
  star          Int
  count_reopen  Int
  last_activity DateTime
  uploaded_at   DateTime               @default(now())
  embedding     Unsupported("vector")?
}
